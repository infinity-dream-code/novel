<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective Love Mystery - Interactive Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&display=swap');
        
        .mystery-font { font-family: 'Creepster', cursive; }
        .spooky-font { font-family: 'Nosifer', cursive; }
        
        .interactive-item {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        
        .interactive-item:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(255, 0, 150, 0.3);
        }
        
        .evidence-glow {
            animation: evidence-pulse 2s infinite;
            border: 2px solid #ff6b9d;
        }
        
        @keyframes evidence-pulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 107, 157, 0.5);
                border-color: #ff6b9d;
            }
            50% { 
                box-shadow: 0 0 40px rgba(255, 107, 157, 0.8);
                border-color: #ff8fab;
            }
        }
        
        .suspect-hover:hover {
            background: linear-gradient(45deg, #ff006e, #8338ec);
            transform: rotateY(5deg) scale(1.08);
        }
        
        .timer-danger {
            animation: timer-flash 0.8s infinite;
            background: linear-gradient(45deg, #ff0000, #ff4757)!important;
        }
        
        @keyframes timer-flash {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .typewriter {
            overflow: hidden;
            border-right: .15em solid orange;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange; }
        }
        
        .mystery-bg {
            background: linear-gradient(135deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #f093fb 50%, 
                #f5576c 75%, 
                #4facfe 100%);
            animation: gradient-shift 8s ease infinite;
        }
        
        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .clue-found {
            animation: clue-celebration 1.5s ease-out;
            transform-origin: center;
        }
        
        @keyframes clue-celebration {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.15) rotate(-3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .dialogue-box {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #ff6b9d;
            animation: dialogue-appear 0.5s ease-out;
        }
        
        @keyframes dialogue-appear {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="mystery-bg min-h-screen text-white overflow-x-hidden">
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="absolute top-10 left-10 text-6xl opacity-20 floating">ğŸ’•</div>
        <div class="absolute top-32 right-20 text-4xl opacity-20 floating" style="animation-delay: 1s;">ğŸ”</div>
        <div class="absolute bottom-20 left-20 text-5xl opacity-20 floating" style="animation-delay: 2s;">ğŸ’”</div>
        <div class="absolute bottom-10 right-10 text-3xl opacity-20 floating" style="animation-delay: 3s;">ğŸ•µï¸</div>
    </div>

    <div class="container mx-auto px-4 py-8 relative z-10">
        <!-- Header with Enhanced Timer -->
        <div class="text-center mb-8">
            <h1 class="mystery-font text-5xl md:text-7xl mb-6 bg-gradient-to-r from-pink-400 via-purple-400 to-red-400 bg-clip-text text-transparent drop-shadow-2xl">
                ğŸ’€ MISTERI CINTA MEMATIKAN ğŸ’€
            </h1>
            
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-6">
                <div id="timerDisplay" class="bg-gradient-to-r from-red-600 to-red-800 px-6 py-3 rounded-2xl shadow-2xl border-2 border-red-400">
                    <div class="flex items-center space-x-2">
                        <span class="text-2xl">â°</span>
                        <div>
                            <div class="text-xs font-semibold text-red-200">WAKTU TERSISA</div>
                            <div id="timer" class="text-2xl font-bold">10:00</div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-3 rounded-2xl shadow-2xl border-2 border-green-400">
                    <div class="flex items-center space-x-2">
                        <span class="text-2xl">ğŸ§©</span>
                        <div>
                            <div class="text-xs font-semibold text-green-200">PETUNJUK TERKUMPUL</div>
                            <div id="clueCount" class="text-2xl font-bold">0/7</div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-600 to-indigo-700 px-6 py-3 rounded-2xl shadow-2xl border-2 border-purple-400">
                    <div class="flex items-center space-x-2">
                        <span class="text-2xl">ğŸ¯</span>
                        <div>
                            <div class="text-xs font-semibold text-purple-200">PROGRESS</div>
                            <div class="w-24 h-2 bg-gray-700 rounded-full mt-1">
                                <div id="progressBar" class="progress-bar h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Introduction -->
        <div id="introSection" class="max-w-4xl mx-auto">
            <div class="bg-black bg-opacity-70 backdrop-blur-lg p-8 rounded-3xl border-2 border-pink-500 shadow-2xl mb-8">
                <div class="text-center mb-6">
                    <h2 class="spooky-font text-4xl mb-4 text-red-400">ğŸŒ¹ VALENTINE BERDARAH ğŸŒ¹</h2>
                </div>
                
                <div class="space-y-6 text-lg leading-relaxed">
                    <p class="typewriter">
                        Malam Valentine 2025 yang seharusnya penuh cinta berubah menjadi mimpi buruk...
                    </p>
                    
                    <div class="bg-red-900 bg-opacity-50 p-6 rounded-2xl border border-red-400">
                        <p class="mb-4">
                            <strong class="text-pink-300">ğŸ“ Lokasi:</strong> Penthouse mewah di Manhattan<br>
                            <strong class="text-pink-300">ğŸ• Waktu:</strong> 23:47, 14 Februari 2025<br>
                            <strong class="text-pink-300">ğŸ‘¤ Korban:</strong> Isabella Valentine, 28 tahun, pianis konser terkenal
                        </p>
                        
                        <p class="text-red-200">
                            Isabella ditemukan tewas di ruang musiknya, dikelilingi mawar merah dan surat-surat cinta berdarah. 
                            Tiga orang dengan motif berbeda... masa lalu yang gelap... dan rahasia yang terkubur.
                        </p>
                    </div>
                    
                    <div class="text-center">
                        <button onclick="startInvestigation()" 
                                class="interactive-item bg-gradient-to-r from-red-600 via-pink-600 to-purple-600 hover:from-red-700 hover:via-pink-700 hover:to-purple-700 px-12 py-4 rounded-2xl text-xl font-bold shadow-2xl border-2 border-pink-400">
                            ğŸ” MULAI INVESTIGASI ğŸ”
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div id="gameArea" class="hidden max-w-7xl mx-auto">
            <!-- Crime Scene Investigation -->
            <div class="grid lg:grid-cols-3 gap-8 mb-8">
                <!-- Evidence Section -->
                <div class="lg:col-span-2">
                    <div class="bg-black bg-opacity-80 backdrop-blur-lg p-6 rounded-3xl border-2 border-red-500 shadow-2xl">
                        <h3 class="text-3xl font-bold mb-6 text-center text-red-400 flex items-center justify-center">
                            <span class="mr-3">ğŸ </span>
                            LOKASI KEJADIAN
                            <span class="ml-3">ğŸ </span>
                        </h3>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="interactive-item evidence-item bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border border-gray-600 shadow-xl" 
                                 onclick="examineEvidence('bloodyletter')" data-evidence="bloodyletter">
                                <div class="flex items-center space-x-4">
                                    <div class="text-4xl">ğŸ’Œ</div>
                                    <div>
                                        <h4 class="font-bold text-lg text-red-300">Surat Ancaman Berdarah</h4>
                                        <p class="text-sm text-gray-300">Tulisan tangan gemetar dengan noda darah</p>
                                        <div class="text-xs text-yellow-400 mt-1">ğŸ” Klik untuk investigasi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="interactive-item evidence-item bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border border-gray-600 shadow-xl" 
                                 onclick="examineEvidence('brokenpiano')" data-evidence="brokenpiano">
                                <div class="flex items-center space-x-4">
                                    <div class="text-4xl">ğŸ¹</div>
                                    <div>
                                        <h4 class="font-bold text-lg text-red-300">Piano Rusak</h4>
                                        <p class="text-sm text-gray-300">Tuts hancur, partitur berdarah</p>
                                        <div class="text-xs text-yellow-400 mt-1">ğŸ” Klik untuk investigasi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="interactive-item evidence-item bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border border-gray-600 shadow-xl" 
                                 onclick="examineEvidence('wineglass')" data-evidence="wineglass">
                                <div class="flex items-center space-x-4">
                                    <div class="text-4xl">ğŸ·</div>
                                    <div>
                                        <h4 class="font-bold text-lg text-red-300">Gelas Wine Beracun</h4>
                                        <p class="text-sm text-gray-300">Sisa racun dan lipstik di bibir gelas</p>
                                        <div class="text-xs text-yellow-400 mt-1">ğŸ” Klik untuk investigasi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="interactive-item evidence-item bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border border-gray-600 shadow-xl" 
                                 onclick="examineEvidence('hiddenkey')" data-evidence="hiddenkey">
                                <div class="flex items-center space-x-4">
                                    <div class="text-4xl">ğŸ—ï¸</div>
                                    <div>
                                        <h4 class="font-bold text-lg text-red-300">Kunci Tersembunyi</h4>
                                        <p class="text-sm text-gray-300">Kunci dengan ukiran aneh di bawah piano</p>
                                        <div class="text-xs text-yellow-400 mt-1">ğŸ” Klik untuk investigasi</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Suspects Panel -->
                <div class="lg:col-span-1">
                    <div class="bg-black bg-opacity-80 backdrop-blur-lg p-6 rounded-3xl border-2 border-purple-500 shadow-2xl">
                        <h3 class="text-2xl font-bold mb-6 text-center text-purple-400">ğŸ‘¥ TERSANGKA ğŸ‘¥</h3>
                        
                        <div class="space-y-4">
                            <div class="interactive-item suspect-hover bg-gradient-to-r from-blue-900 to-blue-800 p-4 rounded-2xl border border-blue-400 shadow-xl" 
                                 onclick="interrogateSuspect('james')">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">ğŸ‘¨â€ğŸ’¼</div>
                                    <h4 class="font-bold text-lg">James Morrison</h4>
                                    <p class="text-xs text-blue-200 mb-2">Tunangan yang Obsesif</p>
                                    <div class="text-xs text-yellow-400">ğŸ’¬ Klik untuk interogasi</div>
                                </div>
                            </div>

                            <div class="interactive-item suspect-hover bg-gradient-to-r from-red-900 to-red-800 p-4 rounded-2xl border border-red-400 shadow-xl" 
                                 onclick="interrogateSuspect('sophia')">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">ğŸ‘©â€ğŸ¤</div>
                                    <h4 class="font-bold text-lg">Sophia Chen</h4>
                                    <p class="text-xs text-red-200 mb-2">Rival Pianis</p>
                                    <div class="text-xs text-yellow-400">ğŸ’¬ Klik untuk interogasi</div>
                                </div>
                            </div>

                            <div class="interactive-item suspect-hover bg-gradient-to-r from-green-900 to-green-800 p-4 rounded-2xl border border-green-400 shadow-xl" 
                                 onclick="interrogateSuspect('daniel')">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">ğŸ‘¨â€âš•ï¸</div>
                                    <h4 class="font-bold text-lg">Dr. Daniel Ross</h4>
                                    <p class="text-xs text-green-200 mb-2">Mantan Kekasih</p>
                                    <div class="text-xs text-yellow-400">ğŸ’¬ Klik untuk interogasi</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investigation Log -->
            <div class="bg-black bg-opacity-80 backdrop-blur-lg p-6 rounded-3xl border-2 border-yellow-500 shadow-2xl mb-8">
                <h3 class="text-2xl font-bold mb-4 text-yellow-400 text-center">ğŸ“‹ LOG INVESTIGASI ğŸ“‹</h3>
                <div id="investigationLog" class="max-h-40 overflow-y-auto space-y-2 text-sm">
                    <p class="text-gray-300">ğŸ” Investigasi dimulai - 23:47, 14 Februari 2025</p>
                    <p class="text-gray-300">ğŸ“ Lokasi: Penthouse Isabella Valentine, Manhattan</p>
                </div>
            </div>

            <!-- Solution Phase -->
            <div id="solutionPhase" class="bg-black bg-opacity-90 backdrop-blur-lg p-8 rounded-3xl border-2 border-gold shadow-2xl">
                <h3 class="text-3xl font-bold mb-6 text-center text-yellow-400">âš–ï¸ SIAPA PEMBUNUHNYA? âš–ï¸</h3>
                
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <button onclick="makeAccusation('james')" 
                            class="interactive-item bg-gradient-to-b from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 p-6 rounded-2xl border-2 border-blue-400 shadow-xl">
                        <div class="text-5xl mb-3">ğŸ‘¨â€ğŸ’¼</div>
                        <div class="font-bold text-lg">James Morrison</div>
                        <div class="text-xs text-blue-200 mt-2">Tunangan Obsesif</div>
                    </button>

                    <button onclick="makeAccusation('sophia')" 
                            class="interactive-item bg-gradient-to-b from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 p-6 rounded-2xl border-2 border-red-400 shadow-xl">
                        <div class="text-5xl mb-3">ğŸ‘©â€ğŸ¤</div>
                        <div class="font-bold text-lg">Sophia Chen</div>
                        <div class="text-xs text-red-200 mt-2">Rival Pianis</div>
                    </button>

                    <button onclick="makeAccusation('daniel')" 
                            class="interactive-item bg-gradient-to-b from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 p-6 rounded-2xl border-2 border-green-400 shadow-xl">
                        <div class="text-5xl mb-3">ğŸ‘¨â€âš•ï¸</div>
                        <div class="font-bold text-lg">Dr. Daniel Ross</div>
                        <div class="text-xs text-green-200 mt-2">Mantan Kekasih</div>
                    </button>
                </div>
                
                <p class="text-center text-yellow-200 text-lg">
                    âš ï¸ Pilih dengan hati-hati! Anda hanya punya SATU kesempatan! âš ï¸
                </p>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameActive = false;
        let timeLeft = 600; // 10 minutes
        let cluesFound = 0;
        let totalClues = 7;
        let timerInterval;
        let evidenceFound = {};
        let suspectsInterrogated = {};
        
        // Evidence Data
        const evidenceDatabase = {
            bloodyletter: {
                title: "ğŸ’Œ Surat Ancaman Berdarah",
                description: "Sebuah surat dengan tulisan tangan gemetar ditemukan di atas piano. Tinta biru bercampur darah kering.",
                detail: `"Isabella sayang... jika aku tidak bisa memilikimu, tidak ada yang bisa. Cinta ini akan berakhir bersama kita berdua..." - Ditandatangani "J.M."`,
                clue: "Pembunuh menulis surat ancaman sebelum aksi. Initial 'J.M.' mengarah ke James Morrison.",
                points: 2
            },
            brokenpiano: {
                title: "ğŸ¹ Piano Hancur",
                description: "Piano grand Isabella dalam kondisi rusak. Beberapa tuts tengah hancur dengan pola aneh.",
                detail: "Tuts yang hancur membentuk chord C-E-G (C Major) - chord pembuka lagu 'Canon in D', lagu pernikahan James dan Isabella yang dibatalkan.",
                clue: "Piano dihancurkan dengan emosi. Chord yang rusak adalah lagu kenangan James-Isabella.",
                points: 2
            },
            wineglass: {
                title: "ğŸ· Gelas Wine Beracun",
                description: "Dua gelas wine di meja. Satu kosong, satu lagi berisi sisa wine merah dengan endapan aneh.",
                detail: "Lab menunjukkan wine mengandung potasium sianida. Gelas memiliki sidik jari Isabella dan jejak lipstik merah gelap - bukan warna lipstik Isabella.",
                clue: "Racun dicampur dalam wine. Lipstik asing menunjukkan kehadiran wanita lain - kemungkinan Sophia Chen.",
                points: 2
            },
            hiddenkey: {
                title: "ğŸ—ï¸ Kunci Misterius",
                description: "Kunci kecil tersembunyi di bawah piano dengan ukiran huruf 'S.C.' dan simbol hati yang retak.",
                detail: "Kunci ini membuka kotak perhiasan di kamar Isabella yang berisi foto lama Isabella dengan Sophia Chen saat masih sahabat.",
                clue: "Sophia Chen punya akses ke rumah Isabella. Mereka punya masa lalu sebagai sahabat dekat.",
                points: 1
            }
        };
        
        // Suspect Data  
        const suspectDatabase = {
            james: {
                name: "James Morrison",
                profession: "Pengusaha Real Estate",
                relationship: "Tunangan Isabella (putus 2 minggu lalu)",
                dialogues: [
                    "Isabella... dia adalah segalanya bagiku. Tanpanya hidup tidak ada artinya.",
                    "Dia membatalkan pernikahan karena 'tidak siap'. Setelah 3 tahun bersama!",
                    "Aku datang tadi malam untuk memohon... untuk terakhir kalinya.",
                    "Jika aku tidak bisa memilikinya... setidaknya aku bisa memastikan tidak ada yang bisa."
                ],
                secret: "James memiliki gangguan kepribadian obsesif. Dia menguntit Isabella dan memasang kamera tersembunyi di apartemennya.",
                alibi: "Mengaku berada di bar sampai tengah malam, tapi tidak ada saksi yang bisa memastikan.",
                evidence: "Tulisan tangannya cocok dengan surat ancaman. Mengetahui lagu favorit mereka."
            },
            sophia: {
                name: "Sophia Chen", 
                profession: "Pianis Konser",
                relationship: "Mantan sahabat dekat, sekarang rival",
                dialogues: [
                    "Isabella mencuri semua yang seharusnya menjadi milikku!",
                    "Kami dulu sahabat... sampai dia menikam punggungku untuk kontrak Carnegie Hall.",
                    "Dia tidak lebih berbakat dariku. Dia hanya pandai memanipulasi orang.",
                    "Tadi malam? Aku... aku datang untuk konfrontasi terakhir."
                ],
                secret: "Sophia memiliki akses ke apartemen Isabella dan tahu tentang wine favorit Isabella. Dia yang membawa racun.",
                alibi: "Mengaku berlatih di studio sampai larut, tapi CCTV menunjukkan dia pergi jam 10 malam.",
                evidence: "Lipstik di gelas wine cocok dengan yang dia pakai. Punya kunci cadangan apartemen Isabella."
            },
            daniel: {
                name: "Dr. Daniel Ross",
                profession: "Dokter Forensik",
                relationship: "Mantan kekasih (putus 6 bulan lalu)",
                dialogues: [
                    "Isabella dan aku berakhir dengan damai. Aku sudah move on.",
                    "Sebagai dokter, aku tahu betul tentang racun... tapi aku tidak akan menyakiti siapa pun.",
                    "Aku mendengar tentang masalahnya dengan James. Pria itu berbahaya.",
                    "Malam itu aku dijaga di rumah sakit. Banyak saksi yang bisa membuktikan."
                ],
                secret: "Daniel masih mencintai Isabella tapi sudah menerima kenyataan. Dia mencoba membantu Isabella mengatasi ancaman James.",
                alibi: "Jaga malam di rumah sakit dengan dokumentasi lengkap dan saksi yang kredibel.",
                evidence: "Tidak ada bukti fisik yang menghubungkannya dengan pembunuhan."
            }
        };

        // Start Game
        function startInvestigation() {
            document.getElementById('introSection').style.display = 'none';
            document.getElementById('gameArea').classList.remove('hidden');
            gameActive = true;
            startTimer();
            addToLog("ğŸš¨ INVESTIGASI DIMULAI! Kumpulkan semua petunjuk sebelum waktu habis!");
            
            // Add some ambient hints
            setTimeout(() => {
                addToLog("ğŸ’¡ TIP: Klik pada setiap barang bukti untuk investigasi detail");
            }, 3000);
            
            setTimeout(() => {
                addToLog("ğŸ’¡ TIP: Interogasi semua tersangka untuk mendapat informasi penting");
            }, 6000);
        }

        // Timer Function  
        function startTimer() {
            timerInterval = setInterval(() => {
                if (!gameActive) return;
                
                timeLeft--;
                updateTimerDisplay();
                
                // Warning at 2 minutes
                if (timeLeft === 120) {
                    document.getElementById('timerDisplay').classList.add('timer-danger');
                    addToLog("âš ï¸ PERINGATAN: Hanya 2 menit tersisa!");
                    Swal.fire({
                        title: 'âš ï¸ WAKTU HAMPIR HABIS!',
                        text: 'Hanya 2 menit tersisa! Segera buat tuduhan!',
                        icon: 'warning',
                        timer: 3000,
                        showConfirmButton: false,
                        background: '#1F2937',
                        color: '#FFFFFF'
                    });
                }
                
                // Game over
                if (timeLeft <= 0) {
                    gameOver('timeout');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress
            const progress = ((600 - timeLeft) / 600) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        // Evidence Investigation
        function examineEvidence(evidenceId) {
            if (!gameActive) return;
            
            const evidence = evidenceDatabase[evidenceId];
            if (!evidence) return;
            
            const wasNew = !evidenceFound[evidenceId];
            if (wasNew) {
                evidenceFound[evidenceId] = true;
                cluesFound += evidence.points;
                updateClueCount();
                
                // Visual feedback
                const element = document.querySelector(`[data-evidence="${evidenceId}"]`);
                element.classList.add('evidence-glow', 'clue-found');
                
                setTimeout(() => {
                    element.classList.remove('clue-found');
                }, 1500);
            }
            
            Swal.fire({
                title: evidence.title,
                html: `
                    <div class="text-left space-y-4">
                        <p class="text-gray-300"><strong>Deskripsi:</strong> ${evidence.description}</p>
                        <div class="bg-gray-800 p-3 rounded">
                            <p class="text-yellow-300"><strong>Detail:</strong> ${evidence.detail}</p>
                        </div>
                        <div class="bg-green-900 p-3 rounded">
                            <p class="text-green-300"><strong>Petunjuk:</strong> ${evidence.clue}</p>
                        </div>
                        ${wasNew ? `<p class="text-center text-blue-400"><strong>+${evidence.points} Petunjuk Baru!</strong></p>` : ''}
                    </div>
                `,
                icon: 'info',
                confirmButtonText: wasNew ? 'âœ… Petunjuk Tercatat!' : 'ğŸ” Tutup',
                confirmButtonColor: wasNew ? '#10B981' : '#3B82F6',
                background: '#1F2937',
                color: '#FFFFFF',
                customClass: {
                    popup: 'dialogue-box'
                }
            });
            
            if (wasNew) {
                addToLog(`ğŸ” BUKTI: ${evidence.clue}`);
            }
        }

        // Suspect Interrogation
        function interrogateSuspect(suspectId) {
            if (!gameActive) return;
            
            const suspect = suspectDatabase[suspectId];
            if (!suspect) return;
            
            // Track interrogation
            if (!suspectsInterrogated[suspectId]) {
                suspectsInterrogated[suspectId] = { count: 0, secretRevealed: false };
            }
            
            suspectsInterrogated[suspectId].count++;
            const interrogationCount = suspectsInterrogated[suspectId].count;
            
            // Get dialogue based on interrogation count
            const dialogue = suspect.dialogues[Math.min(interrogationCount - 1, suspect.dialogues.length - 1)];
            
            let htmlContent = `
                <div class="text-left space-y-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="text-4xl">${suspectId === 'james' ? 'ğŸ‘¨â€ğŸ’¼' : suspectId === 'sophia' ? 'ğŸ‘©â€ğŸ¤' : 'ğŸ‘¨â€âš•ï¸'}</div>
                        <div>
                            <h3 class="text-xl font-bold">${suspect.name}</h3>
                            <p class="text-sm text-gray-400">${suspect.profession}</p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded">
                        <p class="text-blue-300 italic">"${dialogue}"</p>
                    </div>
                    
                    <p class="text-gray-400"><strong>Hubungan:</strong> ${suspect.relationship}</p>
            `;
            
            // Reveal secret after multiple interrogations
            if (interrogationCount >= 3 && !suspectsInterrogated[suspectId].secretRevealed) {
                suspectsInterrogated[suspectId].secretRevealed = true;
                cluesFound++;
                updateClueCount();
                
                htmlContent += `
                    <div class="bg-red-900 p-4 rounded border border-red-400">
                        <h4 class="text-red-300 font-bold mb-2">ğŸ”¥ RAHASIA TERUNGKAP!</h4>
                        <p class="text-red-200">${suspect.secret}</p>
                    </div>
                    
                    <div class="bg-yellow-900 p-4 rounded">
                        <h4 class="text-yellow-300 font-bold mb-2">ğŸ“ Alibi:</h4>
                        <p class="text-yellow-200">${suspect.alibi}</p>
                    </div>
                    
                    <div class="bg-purple-900 p-4 rounded">
                        <h4 class="text-purple-300 font-bold mb-2">ğŸ§© Bukti Terkait:</h4>
                        <p class="text-purple-200">${suspect.evidence}</p>
                    </div>
                    
                    <p class="text-center text-green-400"><strong>+1 Petunjuk Rahasia!</strong></p>
                `;
                
                addToLog(`ğŸ’¥ RAHASIA ${suspect.name.toUpperCase()}: ${suspect.secret}`);
            }
            
            htmlContent += '</div>';
            
            Swal.fire({
                title: `ğŸ” Interogasi: ${suspect.name}`,
                html: htmlContent,
                icon: 'question',
                confirmButtonText: interrogationCount < 3 ? 'ğŸ”„ Interogasi Lagi' : 'ğŸ“ Catat Informasi',
                confirmButtonColor: '#8B5CF6',
                background: '#1F2937',
                color: '#FFFFFF',
                customClass: {
                    popup: 'dialogue-box'
                }
            });
        }

        // Make Accusation
        function makeAccusation(suspectId) {
            if (!gameActive) return;
            
            if (cluesFound < 5) {
                Swal.fire({
                    title: 'âš ï¸ Petunjuk Tidak Cukup!',
                    text: `Anda perlu minimal 5 petunjuk untuk membuat tuduhan. Saat ini: ${cluesFound}/7`,
                    icon: 'warning',
                    confirmButtonText: 'Lanjut Investigasi',
                    confirmButtonColor: '#F59E0B',
                    background: '#1F2937',
                    color: '#FFFFFF'
                });
                return;
            }
            
            gameActive = false;
            clearInterval(timerInterval);
            
            // Correct answer is Sophia Chen
            if (suspectId === 'sophia') {
                Swal.fire({
                    title: 'ğŸ‰ KASUS TERPECAHKAN! ğŸ‰',
                    html: `
                        <div class="text-left space-y-4">
                            <div class="text-center mb-4">
                                <div class="text-6xl mb-2">ğŸ‘©â€ğŸ¤</div>
                                <h3 class="text-2xl font-bold text-red-400">PEMBUNUH: SOPHIA CHEN</h3>
                            </div>
                            
                            <div class="bg-red-900 p-4 rounded">
                                <h4 class="font-bold text-red-300 mb-2">ğŸ” MOTIF:</h4>
                                <p class="text-red-200">Dendam profesional dan iri hati. Sophia tidak bisa menerima kesuksesan Isabella yang "mencuri" semua kesempatannya.</p>
                            </div>
                            
                            <div class="bg-blue-900 p-4 rounded">
                                <h4 class="font-bold text-blue-300 mb-2">ğŸ§© CARA PEMBUNUHAN:</h4>
                                <p class="text-blue-200">Sophia menggunakan kunci cadangan untuk masuk. Dia meracuni wine Isabella dengan potasium sianida sambil berpura-pura ingin berdamai.</p>
                            </div>
                            
                            <div class="bg-green-900 p-4 rounded">
                                <h4 class="font-bold text-green-300 mb-2">ğŸ”‘ BUKTI KUNCI:</h4>
                                <p class="text-green-200">Lipstik di gelas wine, kunci tersembunyi dengan inisial S.C., dan alibi palsu yang terbongkar CCTV.</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-pink-600 to-purple-600 p-6 rounded-lg text-center mt-6">
                                <h2 class="text-3xl font-bold mb-2">ğŸ”“ KODE RAHASIA ğŸ”“</h2>
                                <p class="text-4xl font-bold text-yellow-300">i love you</p>
                                <p class="text-sm text-pink-200 mt-2">Selamat Detective! Anda berhasil memecahkan misteri!</p>
                            </div>
                        </div>
                    `,
                    icon: 'success',
                    confirmButtonText: 'ğŸ† Amazing Detective Work!',
                    confirmButtonColor: '#10B981',
                    allowOutsideClick: false,
                    background: '#1F2937',
                    color: '#FFFFFF',
                    customClass: {
                        popup: 'dialogue-box'
                    }
                });
                
                addToLog("ğŸ† KASUS SELESAI! Sophia Chen terbukti bersalah!");
                
            } else {
                // Wrong answer
                const suspect = suspectDatabase[suspectId];
                Swal.fire({
                    title: 'âŒ TUDUHAN SALAH!',
                    html: `
                        <div class="text-center space-y-4">
                            <div class="text-6xl mb-4">ğŸ˜µ</div>
                            <p class="text-xl">Anda menuduh <strong>${suspect.name}</strong> sebagai pembunuh...</p>
                            <p class="text-lg text-red-300">Tapi tuduhan Anda SALAH!</p>
                            <div class="bg-red-900 p-4 rounded mt-4">
                                <p class="text-red-200">Kasus tidak terpecahkan. Pembunuh sebenarnya lolos dan keadilan tidak tercapai.</p>
                            </div>
                            <p class="text-gray-300 mt-4">Detektif sejati harus lebih teliti dalam menganalisis petunjuk...</p>
                        </div>
                    `,
                    icon: 'error',
                    confirmButtonText: 'ğŸ”„ Coba Lagi di Google',
                    confirmButtonColor: '#EF4444',
                    allowOutsideClick: false,
                    background: '#1F2937',
                    color: '#FFFFFF'
                }).then(() => {
                    window.location.href = 'https://www.google.com';
                });
            }
        }

        // Game Over Function
        function gameOver(reason) {
            gameActive = false;
            clearInterval(timerInterval);
            
            let title, text;
            if (reason === 'timeout') {
                title = 'â° WAKTU HABIS!';
                text = 'Anda kehabisan waktu! Pembunuh berhasil lolos dan kasus tidak terpecahkan...';
            }
            
            Swal.fire({
                title: title,
                text: text,
                icon: 'error',
                confirmButtonText: 'ğŸ”„ Coba Lagi di Google',
                confirmButtonColor: '#EF4444',
                allowOutsideClick: false,
                background: '#1F2937',
                color: '#FFFFFF'
            }).then(() => {
                window.location.href = 'https://www.google.com';
            });
        }

        // Helper Functions
        function updateClueCount() {
            document.getElementById('clueCount').textContent = `${cluesFound}/${totalClues}`;
            
            // Add celebration effect
            const clueDisplay = document.getElementById('clueCount');
            clueDisplay.classList.add('clue-found');
            setTimeout(() => {
                clueDisplay.classList.remove('clue-found');
            }, 1000);
        }

        function addToLog(message) {
            const log = document.getElementById('investigationLog');
            const newEntry = document.createElement('p');
            newEntry.className = 'text-gray-300 opacity-0 transition-opacity duration-500';
            newEntry.textContent = `${getCurrentTime()} - ${message}`;
            
            log.appendChild(newEntry);
            
            // Animate in
            setTimeout(() => {
                newEntry.classList.remove('opacity-0');
            }, 100);
            
            // Auto scroll to bottom
            log.scrollTop = log.scrollHeight;
            
            // Limit log entries to prevent overflow
            while (log.children.length > 20) {
                log.removeChild(log.firstChild);
            }
        }

        function getCurrentTime() {
            const minutes = Math.floor((600 - timeLeft) / 60);
            const seconds = (600 - timeLeft) % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Initialize
        updateTimerDisplay();
        
        // Add some dynamic effects
        setInterval(() => {
            if (gameActive && Math.random() > 0.7) {
                const tips = [
                    "ğŸ’¡ Perhatikan detail kecil dalam setiap bukti",
                    "ğŸ” Interogasi mendalam dapat membuka rahasia tersembunyi", 
                    "ğŸ§© Hubungkan semua petunjuk untuk mendapat gambaran lengkap",
                    "âš–ï¸ Analisis motif, kesempatan, dan bukti fisik",
                    "ğŸ• Manfaatkan waktu dengan bijak - setiap detik berharga"
                ];
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                
                // Show tip briefly in corner
                const tipElement = document.createElement('div');
                tipElement.className = 'fixed bottom-4 right-4 bg-yellow-600 text-black px-4 py-2 rounded-lg shadow-lg z-50 opacity-0 transition-all duration-500';
                tipElement.textContent = randomTip;
                document.body.appendChild(tipElement);
                
                setTimeout(() => tipElement.classList.remove('opacity-0'), 100);
                setTimeout(() => {
                    tipElement.classList.add('opacity-0');
                    setTimeout(() => document.body.removeChild(tipElement), 500);
                }, 3000);
            }
        }, 15000);
    </script>
</body>
</html>
